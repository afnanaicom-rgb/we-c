<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Afnan AI - Ø´Ø¨ÙƒØ© Ø£ÙÙ†Ø§Ù†</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Arabic:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* Ø­Ø§ÙØ¸Øª Ø¹Ù„Ù‰ ÙƒÙ„ ØªÙ†Ø³ÙŠÙ‚Ø§ØªÙƒ Ø§Ù„Ø£ØµÙ„ÙŠØ© Ù‡Ù†Ø§ */
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body, html { height: 100%; margin: 0; padding: 0; background-color: #f8f9fa; color: #1a1a1a; font-family: 'Noto Sans Arabic', sans-serif; overflow-x: hidden; }
        
        .loading-screen {
            position: fixed; inset: 0; background: #ffffff; display: flex; flex-direction: column;
            justify-content: center; align-items: center; z-index: 10001;
        }
        
        .loader {
            width: 40px; height: 40px; border: 3px solid #eee;
            border-top-color: #f59e0b; border-radius: 50%; animation: spin 1s linear infinite;
        }
        
        @keyframes spin { to { transform: rotate(360deg); } }
        
        .view-screen { position: absolute; inset: 0; width: 100%; height: 100%; background: #f8f9fa; display: none; flex-direction: column; z-index: 10; padding-top: 70px; }
        .view-screen.active { display: flex; }

        .app-header { 
            position: fixed; top: 0; right: 0; left: 0; height: 70px; 
            background: rgba(255, 255, 255, 0.9); backdrop-filter: blur(20px); 
            border-bottom: 1px solid #eee; 
            display: flex; align-items: center; justify-content: space-between; 
            padding: 0 1rem; z-index: 1000; 
        }

        .lv-badge {
            background: linear-gradient(45deg, #f59e0b, #fbbf24);
            color: #ffffff; font-weight: 700; font-size: 9px;
            padding: 2px 8px; border-radius: 6px; display: inline-flex;
            align-items: center; justify-content: center;
            box-shadow: 0 2px 10px rgba(245, 158, 11, 0.3);
        }

        .xp-bar-container { width: 100%; height: 6px; background: #eee; border-radius: 10px; margin-top: 8px; overflow: hidden; }
        .xp-bar-fill { height: 100%; background: #f59e0b; width: 0%; transition: width 0.5s ease; }

        .promo-banner {
            width: calc(100% - 2rem); margin: 0 auto 1.2rem; height: 110px;
            background: #ffffff; border-radius: 20px; position: relative; overflow: hidden;
            display: flex; align-items: center; justify-content: center;
            border: 1px solid #eee; box-shadow: 0 4px 15px rgba(0,0,0,0.03);
        }

        .rooms-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; padding: 0 1rem 40px; }
        .room-card { background: #ffffff; border: 1px solid #eee; border-radius: 24px; overflow: hidden; position: relative; box-shadow: 0 2px 10px rgba(0,0,0,0.02); }
        .room-image { width: 100%; aspect-ratio: 1/1; object-fit: cover; }

        .sidebar { 
            position: fixed; top: 0; right: -280px; width: 280px; height: 100%; 
            background: #ffffff; z-index: 4000; transition: 0.4s cubic-bezier(0.4, 0, 0.2, 1); 
            border-left: 1px solid #eee; 
        }
        .sidebar.open { right: 0; }
        .sidebar-item { 
            display: flex; align-items: center; gap: 15px; padding: 14px 20px; 
            cursor: pointer; border-radius: 16px; margin: 6px 12px; transition: 0.2s;
            color: #4b5563; font-weight: 500;
        }
        .sidebar-item:active, .sidebar-item.active { background: #fff7ed; color: #f59e0b; }

        .glass-card { background: #ffffff; border: 1px solid #eee; border-radius: 28px; padding: 30px; text-align: center; box-shadow: 0 10px 30px rgba(0,0,0,0.04); }
        .buy-card { background: #f9fafb; border: 1px solid #eee; border-radius: 22px; padding: 18px; text-align: center; }
        
        .overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.3); z-index: 2500; display: none; backdrop-filter: blur(4px); }
        .overlay.active { display: block; }

        #loginPage {
            position: fixed; inset: 0; background: #ffffff; z-index: 10000;
            display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 40px 20px; text-align: center;
        }

        .login-card { background: #ffffff; border: 1px solid #eee; border-radius: 32px; padding: 32px; width: 100%; max-width: 400px; box-shadow: 0 10px 30px rgba(0,0,0,0.05); }
        .social-btn { display: flex; align-items: center; justify-content: center; gap: 12px; width: 100%; padding: 14px; border-radius: 16px; margin-bottom: 12px; font-weight: 600; transition: all 0.2s; border: 1px solid #eee; cursor: pointer; }
        .social-btn:hover { background: #f9fafb; transform: translateY(-2px); }
        .google-btn { background: #ffffff; color: #000000; }
        .github-btn { background: #24292e; color: #ffffff; }
    </style>
</head>
<body>
    <div id="loading-screen" class="loading-screen">
        <div class="loader"></div>
        <div class="mt-4 text-sm font-medium text-gray-400">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¬Ù„Ø³Ø©...</div>
    </div>

    <div id="loginPage" style="display: none;">
        <div class="mb-8">
            <img src="https://files.manuscdn.com/user_upload_by_module/session_file/310519663174655187/mcieZCLEOIrmCjBq.png" alt="Logo" class="w-20 h-20 mx-auto mb-4 object-contain">
            <h1 class="text-2xl font-bold text-gray-800">Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ø£ÙÙ†Ø§Ù†</h1>
            <p class="text-gray-400 text-sm">Ø³Ø¬Ù„ Ø¯Ø®ÙˆÙ„Ùƒ Ù„Ù„Ù…ØªØ§Ø¨Ø¹Ø©</p>
        </div>

        <div class="login-card">
            <button onclick="loginWithGoogle()" class="social-btn google-btn">
                <img src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg" class="w-5 h-5" alt="Google">
                <span>Google</span>
            </button>

            <button onclick="loginWithGithub()" class="social-btn github-btn">
                <i data-lucide="github" class="w-5 h-5"></i>
                <span>GitHub</span>
            </button>
        </div>
    </div>

    <div id="main-app" style="display: none; height: 100%;">
        <header class="app-header">
            <button onclick="toggleSidebar()" class="p-2.5 bg-gray-50 rounded-xl text-gray-600"><i data-lucide="menu" size="22"></i></button>
            <div class="text-center">
                <div class="text-[9px] font-bold tracking-[3px] text-gray-400 uppercase">Afnan Network</div>
                <div class="text-sm font-bold text-gray-800" id="view-title">Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ØºØ±Ù</div>
            </div>
            <button class="p-2.5 bg-gray-50 rounded-xl text-gray-600"><i data-lucide="search" size="22"></i></button>
        </header>

        <div id="sidebar" class="sidebar">
            <div class="p-8 text-center border-b border-gray-50">
                <div class="relative inline-block">
                    <img id="userAvatar" src="https://i.pravatar.cc/150" class="w-20 h-20 rounded-full mx-auto border-4 border-white shadow-xl">
                    <span class="absolute -bottom-1 -right-1 lv-badge" id="user-lv">LV 1</span>
                </div>
                <div id="userName" class="font-bold text-gray-800 mt-4 text-lg">ØªØ­Ù…ÙŠÙ„...</div>
                <div id="userEmail" class="text-[10px] text-gray-400 mb-2">ID: ---</div>
                
                <div class="px-4">
                    <div class="flex justify-between text-[9px] font-bold text-gray-400 mb-1">
                        <span>Ø§Ù„Ø®Ø¨Ø±Ø© XP</span>
                        <span id="xp-text">0 / 10,000</span>
                    </div>
                    <div class="xp-bar-container">
                        <div class="xp-bar-fill" id="xp-bar"></div>
                    </div>
                </div>
            </div>
            
            <div class="mt-6">
                <div class="sidebar-item active" onclick="switchView('rooms')"><i data-lucide="layout-grid"></i><span>Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</span></div>
                <div class="sidebar-item" onclick="switchView('wallet')"><i data-lucide="wallet"></i><span>Ø§Ù„Ù…Ø­ÙØ¸Ø©</span></div>
                <div class="sidebar-item" onclick="switchView('store')"><i data-lucide="shopping-bag"></i><span>Ø§Ù„Ù…ØªØ¬Ø±</span></div>
                <div class="sidebar-item" onclick="logout()"><i data-lucide="log-out"></i><span>ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬</span></div>
            </div>
        </div>

        <div id="view-rooms" class="view-screen active">
            <div class="px-4 pb-4">
                <div class="promo-banner">
                    <div class="relative z-10 text-center px-6">
                        <div class="text-lg font-bold text-gray-800">ØµÙ†Ø¯ÙˆÙ‚ Ø§Ù„ÙƒÙ†Ø² Ø§Ù„Ø°Ù‡Ø¨ÙŠ</div>
                        <div class="text-[9px] mt-2 bg-orange-100 text-orange-600 px-4 py-1.5 rounded-full inline-block font-bold">Ø£Ù†ÙÙ‚ Ù„ØªØ±ÙØ¹ Ù…Ø³ØªÙˆØ§Ùƒ LV</div>
                    </div>
                </div>
                <div class="rooms-grid" id="rooms-container"></div>
            </div>
        </div>
        
        <div id="view-wallet" class="view-screen">
             <div class="p-6">
                <div class="glass-card mb-8">
                    <div class="text-5xl font-bold text-gray-800" id="wallet-balance">27,000 <span class="text-sm text-orange-500">ğŸ’°</span></div>
                </div>
             </div>
        </div>

        <div id="overlay" class="overlay" onclick="closeAll()"></div>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getAuth, signInWithPopup, GoogleAuthProvider, GithubAuthProvider, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

        // Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ù…Ø´Ø±ÙˆØ¹Ùƒ Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØ©
        const firebaseConfig = {
            apiKey: "AIzaSyBnmqWRY6lV54meFvO89QeXwtd28w81FcY",
            authDomain: "rtx3090-28439.firebaseapp.com",
            databaseURL: "https://rtx3090-28439-default-rtdb.firebaseio.com",
            projectId: "rtx3090-28439",
            storageBucket: "rtx3090-28439.firebasestorage.app",
            messagingSenderId: "178612030690",
            appId: "1:178612030690:web:883189ced2ed3a78e3e2bb"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);

        // ÙˆØ¸Ø§Ø¦Ù Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø© Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠØ©
        window.loginWithGoogle = () => {
            const provider = new GoogleAuthProvider();
            provider.setCustomParameters({ prompt: 'select_account' });
            signInWithPopup(auth, provider).catch(err => showToast(err.message));
        };

        window.loginWithGithub = () => {
            const provider = new GithubAuthProvider();
            signInWithPopup(auth, provider).catch(err => showToast(err.message));
        };

        window.logout = () => {
            signOut(auth).then(() => showToast("ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬ Ø¨Ù†Ø¬Ø§Ø­"));
        };

        // Ù…Ø±Ø§Ù‚Ø¨ Ø­Ø§Ù„Ø© Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ
        onAuthStateChanged(auth, (user) => {
            const loading = document.getElementById('loading-screen');
            const loginPage = document.getElementById('loginPage');
            const mainApp = document.getElementById('main-app');

            if (user) {
                // ØªØ­Ø¯ÙŠØ« Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙÙŠ Ø§Ù„Ø³Ø§ÙŠØ¯Ø¨Ø§Ø±
                document.getElementById('userName').innerText = user.displayName || "Ù…Ø³ØªØ®Ø¯Ù… Ø£ÙÙ†Ø§Ù†";
                document.getElementById('userEmail').innerText = user.email || "Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø¨Ø±ÙŠØ¯";
                document.getElementById('userAvatar').src = user.photoURL || "https://i.pravatar.cc/150";
                
                loginPage.style.display = 'none';
                loading.style.display = 'flex';
                
                setTimeout(() => {
                    loading.style.display = 'none';
                    mainApp.style.display = 'block';
                    renderRooms();
                    refreshUI();
                }, 1000);
            } else {
                mainApp.style.display = 'none';
                loading.style.display = 'none';
                loginPage.style.display = 'flex';
            }
        });
    </script>

    <script>
        let state = { balance: 27000, totalSpent: 0, level: 1, xp: 0 };

        function updateLV() {
            let xpToNext = 10000; 
            let progress = (state.totalSpent % xpToNext / xpToNext) * 100;
            document.getElementById('user-lv').innerText = `LV ${Math.floor(state.totalSpent / xpToNext) + 1}`;
            document.getElementById('xp-bar').style.width = `${progress}%`;
        }

        function refreshUI() {
            const bal = document.getElementById('wallet-balance');
            if(bal) bal.innerHTML = `${state.balance.toLocaleString()} <span class="text-sm text-orange-500">ğŸ’°</span>`;
            updateLV();
        }

        const rooms = [
            { name: "Ù…Ø¬Ù„Ø³ Ø§Ù„Ù†Ø´Ø§Ù…Ù‰", img: "https://images.unsplash.com/photo-1517457373958-b7bdd4587205?w=400", active: "5.2k" },
            { name: "ØºØ±ÙØ© Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨", img: "https://images.unsplash.com/photo-1542751371-adc38448a05e?w=400", active: "1.1k" }
        ];

        function renderRooms() {
            const container = document.getElementById('rooms-container');
            if (container) {
                container.innerHTML = rooms.map(room => `
                    <div class="room-card" onclick="showToast('Ø¬Ø§Ø±ÙŠ Ø¯Ø®ÙˆÙ„ ${room.name}...')">
                        <img src="${room.img}" class="room-image">
                        <div class="p-4 text-center font-bold text-xs">${room.name}</div>
                    </div>
                `).join('');
                lucide.createIcons();
            }
        }

        function switchView(viewId) {
            document.querySelectorAll('.view-screen').forEach(v => v.classList.remove('active'));
            document.getElementById(`view-${viewId}`).classList.add('active');
            closeAll();
        }

        function toggleSidebar() {
            document.getElementById('sidebar').classList.toggle('open');
            document.getElementById('overlay').classList.toggle('active');
        }

        function closeAll() {
            document.getElementById('sidebar').classList.remove('open');
            document.getElementById('overlay').classList.remove('active');
        }

        function showToast(msg) {
            const t = document.createElement('div');
            t.className = 'fixed bottom-10 left-1/2 -translate-x-1/2 bg-gray-900 text-white px-6 py-3 rounded-2xl text-[11px] font-bold z-[11000] shadow-2xl animate-bounce';
            t.innerText = msg;
            document.body.appendChild(t);
            setTimeout(() => t.remove(), 2500);
        }

        window.onload = () => lucide.createIcons();
    </script>
</body>
</html>
