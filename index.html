<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Afnan AI - ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Arabic:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="afnan.css">
    <style>
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body, html { height: 100%; margin: 0; padding: 0; background-color: #f8f9fa; color: #1a1a1a; font-family: 'Noto Sans Arabic', sans-serif; overflow-x: hidden; }
        
        .loading-screen {
            position: fixed; inset: 0; background: #ffffff; display: flex; flex-direction: column;
            justify-content: center; align-items: center; z-index: 10001;
        }
        
        .loader {
            width: 40px; height: 40px; border: 3px solid #eee;
            border-top-color: #f59e0b; border-radius: 50%; animation: spin 1s linear infinite;
        }
        
        @keyframes spin { to { transform: rotate(360deg); } }
        
        /* Views System */
        .view-screen { position: absolute; inset: 0; width: 100%; height: 100%; background: #f8f9fa; display: none; flex-direction: column; z-index: 10; padding-top: 70px; }
        .view-screen.active { display: flex; }

        /* Header Styles */
        .app-header { 
            position: fixed; top: 0; right: 0; left: 0; height: 70px; 
            background: rgba(255, 255, 255, 0.9); backdrop-filter: blur(20px); 
            border-bottom: 1px solid #eee; 
            display: flex; align-items: center; justify-content: space-between; 
            padding: 0 1rem; z-index: 1000; 
        }

        /* LV System */
        .lv-badge {
            background: linear-gradient(45deg, #f59e0b, #fbbf24);
            color: #ffffff; font-weight: 700; font-size: 9px;
            padding: 2px 8px; border-radius: 6px; display: inline-flex;
            align-items: center; justify-content: center;
            box-shadow: 0 2px 10px rgba(245, 158, 11, 0.3);
        }

        .xp-bar-container {
            width: 100%; height: 6px; background: #eee; border-radius: 10px; margin-top: 8px; overflow: hidden;
        }
        .xp-bar-fill {
            height: 100%; background: #f59e0b; width: 0%; transition: width 0.5s ease;
        }

        /* Banner */
        .promo-banner {
            width: calc(100% - 2rem); margin: 0 auto 1.2rem; height: 110px;
            background: #ffffff; border-radius: 20px; position: relative; overflow: hidden;
            display: flex; align-items: center; justify-content: center;
            border: 1px solid #eee; box-shadow: 0 4px 15px rgba(0,0,0,0.03);
        }

        /* Room Grid */
        .rooms-grid {
            display: grid; grid-template-columns: repeat(2, 1fr);
            gap: 15px; padding: 0 1rem 40px;
        }
        .room-card {
            background: #ffffff; border: 1px solid #eee;
            border-radius: 24px; overflow: hidden; position: relative;
            box-shadow: 0 2px 10px rgba(0,0,0,0.02);
        }
        .room-image { width: 100%; aspect-ratio: 1/1; object-fit: cover; }

        /* Sidebar */
        .sidebar { 
            position: fixed; top: 0; right: -280px; width: 280px; height: 100%; 
            background: #ffffff; z-index: 4000; transition: 0.4s cubic-bezier(0.4, 0, 0.2, 1); 
            border-left: 1px solid #eee; 
        }
        .sidebar.open { right: 0; }
        .sidebar-item { 
            display: flex; align-items: center; gap: 15px; padding: 14px 20px; 
            cursor: pointer; border-radius: 16px; margin: 6px 12px; transition: 0.2s;
            color: #4b5563; font-weight: 500;
        }
        .sidebar-item:active, .sidebar-item.active { background: #fff7ed; color: #f59e0b; }

        /* Wallet & Store Cards */
        .glass-card { background: #ffffff; border: 1px solid #eee; border-radius: 28px; padding: 30px; text-align: center; box-shadow: 0 10px 30px rgba(0,0,0,0.04); }
        .buy-card { background: #f9fafb; border: 1px solid #eee; border-radius: 22px; padding: 18px; text-align: center; }
        
        .overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.3); z-index: 2500; display: none; backdrop-filter: blur(4px); }
        .overlay.active { display: block; }

        input::placeholder { color: #9ca3af; }

        /* Login Page Styling */
        #loginPage {
            position: fixed;
            inset: 0;
            background: #ffffff;
            z-index: 10000;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 40px 20px;
            text-align: center;
        }

        .login-card {
            background: #ffffff;
            border: 1px solid #eee;
            border-radius: 32px;
            padding: 32px;
            width: 100%;
            max-width: 400px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.05);
        }

        .social-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            width: 100%;
            padding: 14px;
            border-radius: 16px;
            margin-bottom: 12px;
            font-weight: 600;
            transition: all 0.2s;
            border: 1px solid #eee;
        }

        .social-btn:hover {
            background: #f9fafb;
            transform: translateY(-2px);
        }

        .google-btn { background: #ffffff; color: #000000; }
        .github-btn { background: #24292e; color: #ffffff; }
        .x-btn { background: #000000; color: #ffffff; }

        .form-input {
            width: 100%;
            padding: 14px;
            border-radius: 16px;
            border: 1px solid #eee;
            margin-bottom: 12px;
            outline: none;
            transition: border-color 0.2s;
        }

        .form-input:focus {
            border-color: #f59e0b;
        }

        .login-submit-btn {
            width: 100%;
            padding: 14px;
            border-radius: 16px;
            background: #f59e0b;
            color: white;
            font-weight: 700;
            margin-top: 8px;
            transition: opacity 0.2s;
        }

        .login-submit-btn:hover {
            opacity: 0.9;
        }
    </style>
</head>
<body>
    <!-- Ø´Ø§Ø´Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„ -->
    <div id="loading-screen" class="loading-screen" style="display: none;">
        <div class="loader"></div>
        <div class="mt-4 text-sm font-medium text-gray-400">ØªØ­Ù…ÙŠÙ„ Ø£ÙÙ†Ø§Ù†...</div>
    </div>

    <!-- ØµÙØ­Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ -->
    <div id="loginPage">
        <div class="mb-8">
            <img src="https://files.manuscdn.com/user_upload_by_module/session_file/310519663174655187/mcieZCLEOIrmCjBq.png" alt="Afnan AI Logo" class="w-20 h-20 mx-auto mb-4 object-contain">
            <h1 class="text-2xl font-bold text-gray-800">Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ø£ÙÙ†Ø§Ù†</h1>
            <p class="text-gray-400 text-sm">Ø³Ø¬Ù„ Ø¯Ø®ÙˆÙ„Ùƒ Ù„Ù„Ù…ØªØ§Ø¨Ø¹Ø©</p>
        </div>

        <div class="login-card">
            <div class="mb-6">
                <input type="email" placeholder="Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ" class="form-input">
                <input type="password" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±" class="form-input">
                <button onclick="handleLogin()" class="login-submit-btn">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</button>
            </div>

            <div class="flex items-center my-6">
                <div class="flex-1 h-[1px] bg-gray-100"></div>
                <span class="px-4 text-xs text-gray-400 font-bold">Ø£Ùˆ Ø¹Ø¨Ø±</span>
                <div class="flex-1 h-[1px] bg-gray-100"></div>
            </div>
            
            <button onclick="loginWithGoogle()" class="social-btn google-btn">
                <img src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg" class="w-5 h-5" alt="Google">
                <span>Google</span>
            </button>

            <button onclick="loginWithGithub()" class="social-btn github-btn">
                <i data-lucide="github" class="w-5 h-5"></i>
                <span>GitHub</span>
            </button>
        </div>
    </div>

    <div id="main-app" style="display: none; height: 100%;">
        <header class="app-header">
            <button onclick="toggleSidebar()" class="p-2.5 bg-gray-50 rounded-xl text-gray-600"><i data-lucide="menu" size="22"></i></button>
            <div class="text-center">
                <div class="text-[9px] font-bold tracking-[3px] text-gray-400 uppercase">Afnan Network</div>
                <div class="text-sm font-bold text-gray-800" id="view-title">Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ØºØ±Ù</div>
            </div>
            <button onclick="focusSearch()" class="p-2.5 bg-gray-50 rounded-xl text-gray-600"><i data-lucide="search" size="22"></i></button>
        </header>

        <!-- Sidebar -->
        <div id="sidebar" class="sidebar">
            <div class="p-8 text-center border-b border-gray-50">
                <div class="relative inline-block">
                    <img src="https://i.pravatar.cc/150?u=afnan" class="w-20 h-20 rounded-full mx-auto border-4 border-white shadow-xl">
                    <span class="absolute -bottom-1 -right-1 lv-badge" id="user-lv">LV 1</span>
                </div>
                <div class="font-bold text-gray-800 mt-4 text-lg">Ø£ÙÙ†Ø§Ù† ÙƒØ§Ø´</div>
                <div class="text-[10px] text-gray-400 mb-2">ID: 88291034</div>
                
                <div class="px-4">
                    <div class="flex justify-between text-[9px] font-bold text-gray-400 mb-1">
                        <span>Ø§Ù„Ø®Ø¨Ø±Ø© XP</span>
                        <span id="xp-text">0 / 10,000</span>
                    </div>
                    <div class="xp-bar-container">
                        <div class="xp-bar-fill" id="xp-bar"></div>
                    </div>
                </div>
            </div>
            
            <div class="mt-6">
                <div class="sidebar-item active" onclick="switchView('rooms')">
                    <i data-lucide="layout-grid" size="20"></i>
                    <span>Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</span>
                </div>
                <div class="sidebar-item" onclick="switchView('wallet')">
                    <i data-lucide="wallet" size="20"></i>
                    <span>Ø§Ù„Ù…Ø­ÙØ¸Ø©</span>
                </div>
                <div class="sidebar-item" onclick="switchView('store')">
                    <i data-lucide="shopping-bag" size="20"></i>
                    <span>Ø§Ù„Ù…ØªØ¬Ø±</span>
                </div>
                <div class="sidebar-item" onclick="switchView('friends')">
                    <i data-lucide="users" size="20"></i>
                    <span>Ø£ØµØ¯Ù‚Ø§Ø¦ÙŠ</span>
                </div>
                <div class="sidebar-item" onclick="logout()">
                    <i data-lucide="log-out" size="20"></i>
                    <span>ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬</span>
                </div>
            </div>
        </div>

        <!-- VIEW: ROOMS -->
        <div id="view-rooms" class="view-screen active">
            <div class="px-4 pb-4">
                <div class="bg-white rounded-2xl flex items-center px-4 h-12 border border-gray-100 mb-4 shadow-sm">
                    <i data-lucide="search" size="16" class="text-gray-300"></i>
                    <input id="room-search" type="text" placeholder="Ø¨Ø­Ø« Ø¹Ù† ØºØ±Ù Ù…Ù…ÙŠØ²Ø©..." class="bg-transparent border-none outline-none flex-1 px-3 text-sm text-gray-700">
                </div>
                
                <div class="promo-banner">
                    <div class="absolute inset-0 bg-gradient-to-l from-orange-50 to-transparent"></div>
                    <div class="relative z-10 text-center px-6">
                        <div class="text-[10px] font-bold text-orange-400 mb-1 uppercase tracking-widest">ØªØ­Ø¯ÙŠØ§Øª Ø§Ù„ÙŠÙˆÙ…</div>
                        <div class="text-lg font-bold text-gray-800">ØµÙ†Ø¯ÙˆÙ‚ Ø§Ù„ÙƒÙ†Ø² Ø§Ù„Ø°Ù‡Ø¨ÙŠ</div>
                        <div class="text-[9px] mt-2 bg-orange-100 text-orange-600 px-4 py-1.5 rounded-full inline-block font-bold">Ø£Ù†ÙÙ‚ Ù„ØªØ±ÙØ¹ Ù…Ø³ØªÙˆØ§Ùƒ LV</div>
                    </div>
                </div>

                <div class="rooms-grid" id="rooms-container"></div>
            </div>
        </div>

        <!-- VIEW: WALLET -->
        <div id="view-wallet" class="view-screen">
            <div class="p-6">
                <div class="glass-card mb-8">
                    <div class="text-[11px] font-bold text-gray-400 mb-3 uppercase tracking-widest">Ø±ØµÙŠØ¯Ùƒ Ø§Ù„Ø­Ø§Ù„ÙŠ</div>
                    <div id="wallet-balance" class="text-5xl font-bold text-gray-800">27,000 <span class="text-sm text-orange-500">ğŸ’°</span></div>
                </div>
                
                <h3 class="text-sm font-bold mb-4 text-gray-500 px-2">Ø¨Ø§Ù‚Ø§Øª Ø§Ù„Ø´Ø­Ù† (ØªØ²ÙŠØ¯ Ø§Ù„Ù€ LV)</h3>
                <div class="grid grid-cols-1 gap-3">
                    <div class="buy-card flex items-center justify-between">
                        <div class="text-right">
                            <div class="font-bold text-gray-800">Ø¨Ø§Ù‚Ø© Ø§Ù„Ù…Ø¨ØªØ¯Ø¦</div>
                            <div class="text-[10px] text-orange-500 font-bold">+27,000 Ø¹Ù…Ù„Ø©</div>
                        </div>
                        <button onclick="processPurchase(27000, 1)" class="bg-orange-500 text-white px-6 py-2.5 rounded-xl font-bold text-xs shadow-lg shadow-orange-200">1$ Ø´Ø±Ø§Ø¡</button>
                    </div>
                    <div class="buy-card flex items-center justify-between">
                        <div class="text-right">
                            <div class="font-bold text-gray-800">Ø¨Ø§Ù‚Ø© Ø§Ù„Ù…Ø­ØªØ±Ù</div>
                            <div class="text-[10px] text-orange-500 font-bold">+140,000 Ø¹Ù…Ù„Ø©</div>
                        </div>
                        <button onclick="processPurchase(140000, 5)" class="bg-gray-800 text-white px-6 py-2.5 rounded-xl font-bold text-xs">5$ Ø´Ø±Ø§Ø¡</button>
                    </div>
                    <div class="buy-card flex items-center justify-between">
                        <div class="text-right">
                            <div class="font-bold text-gray-800">Ø§Ù„Ø¨Ø§Ù‚Ø© Ø§Ù„Ù…Ù„ÙƒÙŠØ©</div>
                            <div class="text-[10px] text-orange-500 font-bold">+300,000 Ø¹Ù…Ù„Ø©</div>
                        </div>
                        <button onclick="processPurchase(300000, 10)" class="bg-gray-800 text-white px-6 py-2.5 rounded-xl font-bold text-xs">10$ Ø´Ø±Ø§Ø¡</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- VIEW: STORE -->
        <div id="view-store" class="view-screen overflow-y-auto">
            <div class="p-5">
                <div class="flex items-center justify-between mb-8">
                    <div>
                        <h2 class="text-xl font-bold text-gray-800">Ø§Ù„Ù…ØªØ¬Ø± Ø§Ù„Ø­ØµØ±ÙŠ</h2>
                        <p class="text-[10px] text-gray-400">ÙƒÙ„ Ø¹Ù…Ù„ÙŠØ© Ø´Ø±Ø§Ø¡ ØªØ±ÙØ¹ Ù…Ø³ØªÙˆØ§Ùƒ</p>
                    </div>
                    <i data-lucide="shopping-cart" class="text-orange-500"></i>
                </div>
                <div class="grid grid-cols-2 gap-4">
                    <div class="bg-white border border-gray-100 rounded-3xl p-5 text-center shadow-sm">
                        <div class="text-4xl mb-3">ğŸ·ï¸</div>
                        <div class="text-xs font-bold text-gray-700">ØªØºÙŠÙŠØ± Ø§Ù„Ø§Ø³Ù…</div>
                        <div class="text-[10px] text-orange-500 mt-2 font-bold">5,000 ğŸ’°</div>
                        <button onclick="buyFromStore(5000, 'ØªØºÙŠÙŠØ± Ø§Ù„Ø§Ø³Ù…')" class="w-full mt-4 py-2.5 bg-gray-50 rounded-xl text-[10px] font-bold text-gray-600">Ø§Ù…ØªÙ„Ø§Ùƒ</button>
                    </div>
                    <div class="bg-white border border-gray-100 rounded-3xl p-5 text-center shadow-sm">
                        <div class="text-4xl mb-3">âœ¨</div>
                        <div class="text-xs font-bold text-gray-700">Ù‡Ø§Ù„Ø© Ø§Ù„Ù…Ø³ØªÙˆÙ‰</div>
                        <div class="text-[10px] text-orange-500 mt-2 font-bold">15,000 ğŸ’°</div>
                        <button onclick="buyFromStore(15000, 'Ù‡Ø§Ù„Ø© Ø§Ù„Ù…Ø³ØªÙˆÙ‰')" class="w-full mt-4 py-2.5 bg-gray-50 rounded-xl text-[10px] font-bold text-gray-600">Ø§Ù…ØªÙ„Ø§Ùƒ</button>
                    </div>
                    <div class="bg-white border border-gray-100 rounded-3xl p-5 text-center shadow-sm">
                        <div class="text-4xl mb-3">ğŸ‘‘</div>
                        <div class="text-xs font-bold text-gray-700">Ø§Ù„ØªØ§Ø¬ Ø§Ù„Ù…Ø§Ø³ÙŠ</div>
                        <div class="text-[10px] text-orange-500 mt-2 font-bold">50,000 ğŸ’°</div>
                        <button onclick="buyFromStore(50000, 'Ø§Ù„ØªØ§Ø¬ Ø§Ù„Ù…Ø§Ø³ÙŠ')" class="w-full mt-4 py-2.5 bg-gray-50 rounded-xl text-[10px] font-bold text-gray-600">Ø§Ù…ØªÙ„Ø§Ùƒ</button>
                    </div>
                    <div class="bg-white border border-gray-100 rounded-3xl p-5 text-center shadow-sm">
                        <div class="text-4xl mb-3">ğŸï¸</div>
                        <div class="text-xs font-bold text-gray-700">Ø³ÙŠØ§Ø±Ø© Ø§Ù„Ø¯Ø®ÙˆÙ„</div>
                        <div class="text-[10px] text-orange-500 mt-2 font-bold">100,000 ğŸ’°</div>
                        <button onclick="buyFromStore(100000, 'Ø³ÙŠØ§Ø±Ø© Ø§Ù„Ø¯Ø®ÙˆÙ„')" class="w-full mt-4 py-2.5 bg-gray-50 rounded-xl text-[10px] font-bold text-gray-600">Ø§Ù…ØªÙ„Ø§Ùƒ</button>
                    </div>
                </div>
            </div>
        </div>

        <div id="overlay" class="overlay" onclick="closeAll()"></div>
    </div>

    <script>
        // --- Ù…Ø­Ø±Ùƒ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙˆØ§Ù„Ù€ LV ---
        let state = {
            balance: 27000,
            totalSpent: 0, 
            level: 1,
            xp: 0,
            isLoggedIn: false
        };

        const MAX_SPENT = 1000000; 
        const MAX_LEVEL = 100;

        function updateLV() {
            let newLevel = Math.floor((state.totalSpent / MAX_SPENT) * MAX_LEVEL) + 1;
            if (newLevel > MAX_LEVEL) newLevel = MAX_LEVEL;
            state.level = newLevel;

            let xpToNext = 10000; 
            state.xp = state.totalSpent % xpToNext;
            let progress = (state.xp / xpToNext) * 100;

            document.getElementById('user-lv').innerText = `LV ${state.level}`;
            document.getElementById('xp-bar').style.width = `${progress}%`;
            document.getElementById('xp-text').innerText = `${state.xp.toLocaleString()} / ${xpToNext.toLocaleString()}`;
            
            if (state.level === 100) {
                document.getElementById('xp-bar').style.backgroundColor = '#8b5cf6'; 
                document.getElementById('user-lv').style.background = 'linear-gradient(45deg, #8b5cf6, #d946ef)';
            }
        }

        function processPurchase(amount, dollars) {
            state.balance += amount;
            state.totalSpent += (amount / 2); 
            refreshUI();
            showToast(`âœ… ØªÙ… Ø´Ø­Ù† ${amount.toLocaleString()} Ø¹Ù…Ù„Ø©`);
        }

        function buyFromStore(cost, itemName) {
            if (state.balance < cost) {
                showToast('âŒ Ø¹Ø°Ø±Ø§Ù‹ØŒ Ø±ØµÙŠØ¯Ùƒ ØºÙŠØ± ÙƒØ§ÙÙ');
                return;
            }
            state.balance -= cost;
            state.totalSpent += cost;
            refreshUI();
            showToast(`ğŸ‰ Ù…Ø¨Ø±ÙˆÙƒ! Ø­ØµÙ„Øª Ø¹Ù„Ù‰ ${itemName}`);
        }

        function refreshUI() {
            const balanceEl = document.getElementById('wallet-balance');
            if (balanceEl) {
                balanceEl.innerHTML = `${state.balance.toLocaleString()} <span class="text-sm text-orange-500">ğŸ’°</span>`;
            }
            updateLV();
        }

        // --- Ù†Ø¸Ø§Ù… Ø§Ù„ØºØ±Ù ---
        const rooms = [
            { id: 1, name: "Ù…Ø¬Ù„Ø³ Ø§Ù„Ù†Ø´Ø§Ù…Ù‰", img: "https://images.unsplash.com/photo-1517457373958-b7bdd4587205?w=400", active: "5.2k" },
            { id: 2, name: "ØºØ±ÙØ© Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨", img: "https://images.unsplash.com/photo-1542751371-adc38448a05e?w=400", active: "1.1k" },
            { id: 3, name: "Ø³Ù‡Ø±Ø© Ø§Ù„Ø¹Ø±Ø¨", img: "https://images.unsplash.com/photo-1516450360452-9312f5e86fc7?w=400", active: "850" },
            { id: 4, name: "Ù…Ù„ØªÙ‚Ù‰ Ø§Ù„Ø´Ø¹Ø±Ø§Ø¡", img: "https://images.unsplash.com/photo-1519671482749-fd09be7ccebf?w=400", active: "3.4k" }
        ];

        function renderRooms() {
            const container = document.getElementById('rooms-container');
            if (container) {
                container.innerHTML = rooms.map(room => `
                    <div class="room-card" onclick="showToast('Ø¬Ø§Ø±ÙŠ Ø¯Ø®ÙˆÙ„ ${room.name}...')">
                        <div class="absolute top-3 left-3 bg-white/90 backdrop-blur-md px-3 py-1 rounded-lg text-[9px] font-bold text-gray-800 z-20 shadow-sm border border-gray-100">
                            <i data-lucide="eye" size="10" class="inline mb-0.5"></i> ${room.active}
                        </div>
                        <img src="${room.img}" class="room-image" alt="${room.name}">
                        <div class="p-4 text-center">
                            <div class="text-[12px] font-bold text-gray-800 truncate">${room.name}</div>
                            <div class="text-[8px] text-orange-500 mt-1 font-bold uppercase tracking-wider">Ù†Ø´Ø· Ø§Ù„Ø¢Ù†</div>
                        </div>
                    </div>
                `).join('');
                lucide.createIcons();
            }
        }

        // --- ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ ---
        function handleLogin() {
            showToast('Ø¬Ø§Ø±ÙŠ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„...');
            setTimeout(() => {
                state.isLoggedIn = true;
                document.getElementById('loginPage').style.display = 'none';
                document.getElementById('loading-screen').style.display = 'flex';
                
                setTimeout(() => {
                    document.getElementById('loading-screen').style.display = 'none';
                    document.getElementById('main-app').style.display = 'block';
                    renderRooms();
                    refreshUI();
                }, 1500);
            }, 1000);
        }

        function loginWithGoogle() { handleLogin(); }
        function loginWithGithub() { handleLogin(); }
        
        function logout() {
            state.isLoggedIn = false;
            document.getElementById('main-app').style.display = 'none';
            document.getElementById('loginPage').style.display = 'flex';
            showToast('ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬');
        }

        // --- Ø§Ù„Ù…Ù„Ø§Ø­Ø© ÙˆØ§Ù„ØªØ­ÙƒÙ… ---
        function switchView(viewId) {
            document.querySelectorAll('.view-screen').forEach(v => v.classList.remove('active'));
            document.querySelectorAll('.sidebar-item').forEach(i => i.classList.remove('active'));
            
            const targetView = document.getElementById(`view-${viewId}`);
            if (targetView) targetView.classList.add('active');
            
            const titles = {
                'rooms': 'Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ØºØ±Ù',
                'wallet': 'Ø´Ø­Ù† Ø§Ù„Ù…Ø­ÙØ¸Ø©',
                'store': 'Ù…ØªØ¬Ø± Ø§Ù„Ù‡Ø¯Ø§ÙŠØ§',
                'friends': 'Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø£ØµØ¯Ù‚Ø§Ø¡'
            };
            
            document.getElementById('view-title').innerText = titles[viewId] || 'Ø£ÙÙ†Ø§Ù†';
            closeAll();
            lucide.createIcons();
        }

        function toggleSidebar() {
            document.getElementById('sidebar').classList.toggle('open');
            document.getElementById('overlay').classList.toggle('active');
        }

        function closeAll() {
            document.getElementById('sidebar').classList.remove('open');
            document.getElementById('overlay').classList.remove('active');
        }

        function showToast(msg) {
            const t = document.createElement('div');
            t.className = 'fixed bottom-10 left-1/2 -translate-x-1/2 bg-gray-900 text-white px-6 py-3 rounded-2xl text-[11px] font-bold z-[11000] shadow-2xl';
            t.innerText = msg;
            document.body.appendChild(t);
            setTimeout(() => t.remove(), 2500);
        }

        window.onload = () => {
            lucide.createIcons();
        };
    </script>
</body>
</html>
